<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <title>Concentration</title>
</head>
<link rel="stylesheet" href="./gameStyle.css">
<body id="bod">
    <div class="cards">
        <div class="cardRow1">
            <div class="card" onclick="javascript : chooseCard(0)">
<!--                <img src="./Shapes/circle.png" alt = 'no image'>-->
            </div>
            <div class="card" onclick="javascript : chooseCard(1)">
<!--                <img src="./Shapes/square.png" alt = 'no image'>-->
            </div>
            <div class="card" onclick="javascript : chooseCard(2)">
<!--                <img src="./Shapes/circle.png" alt = 'no image'>-->
            </div>
            
        </div>
        <div class="cardRow2">
            <div class="card" onclick="javascript : chooseCard(3)">
<!--                <img src="./Shapes/triangle.png" alt = 'no image'>-->
            </div>
            <div class="card" onclick="javascript : chooseCard(4)">
<!--                <img src="./Shapes/square.png" alt = 'no image'>-->
            </div>
            <div class="card" onclick="javascript : chooseCard(5)">
<!--                <img src="./Shapes/triangle.png" alt = 'no image'>-->
            </div>
            
        </div>
    


    </div>
    <input type="button" id="confirm" class="confirm" value="Memorized!" onclick="javascript : confirm()">

</body>

<script language="JavaScript">
    const shapes = {
        0 : './Shapes/circle.png',
        1 : './Shapes/square.png',
        2 : './Shapes/triangle.png',
        3 : './Shapes/diamond.png',
        4 : './Shapes/star.png',
        5 : './Shapes/rings.png',
        6 : './Shapes/heart.png',
    }
    let chooseNum = 0;
    let point = 0;
    let choice = 0;
    let chosenCards = [null,null];
    let cardssituation = [1,1,1,1,1,1];
    let randomNums = {};
    let randomNumsTemp = [0,1,2,3,4,5,6];
    let places = {};
    let placeShapes = {};
    function shuffle(o) {
        for(var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
        return o;
    }

function newPlaceShapes() {
    places = shuffle([0, 1, 2, 3, 4, 5]);
    randomNums = shuffle(randomNumsTemp).splice(0, 3);
    // console.log(places);
    // console.log(randomNums);
    // console.log(places[0]);
    // console.log(places[1]);
    // console.log(places[2]);
    // console.log(places[3]);

    for (let i = 0; i < 6; i++) {
        if (i < 2) {
            placeShapes[places[i]] = randomNums[0];
            console.log("first");
        } else if (i < 4) {
            placeShapes[places[i]] = randomNums[1];
            console.log("second");
        } else if (i < 6) {
            placeShapes[places[i]] = randomNums[2];
            console.log("third");
        }
    }
    shuffleCards();
}
    console.log(placeShapes);

    function shuffleCards(){
        let cards = document.getElementsByClassName("card");
        for(let i = 0 ; i<6;i++){
            // while(cards.item(i).childNodes.item(0)){
            //     cards.item(i).childNodes.item(0).remove();
            // }
            var para = document.createElement("img")
            var node = shapes[placeShapes[i]];
            console.log(placeShapes);
            para.src = node;
            cards.item(i).appendChild(para);
            console.log(para.src);
        }
    }
    newPlaceShapes();

    function $(id){
        return document.getElementById(id);
    }


    function confirm(){

        let obj = document.getElementsByClassName("card");

        for(let i = 0 ; i<obj.length ; i++){
            while (obj.item(i).childNodes.item(0)){
                obj.item(i).childNodes.item(0).remove();
            }
            obj.item(i).style.backgroundColor="rgb(27,173,172)";
            console.log("clicked");
        }
        cardssituation = [0,0,0,0,0,0];
        $("confirm").style.visibility = "hidden";
        // $("salam").style.backgroundColor="blue";

    }

    function chooseCard(num){
        if(cardssituation[num] === 0) {
            if(choice === 0){
                choice = 1;

            }
            else if(choice === 1){
                choice = 2;
            }
            chooseNum++;
            var el = document.getElementsByClassName("card");
            var para = document.createElement("img");
            var node = shapes[placeShapes[num]];
            para.src = node;
            el.item(num).style.backgroundColor = "#f7f7f7";
            el.item(num).appendChild(para);
            cardssituation[num] = 1;
            if(choice === 1) {
                chosenCards[0] = num;
            }
            else if(choice === 2){
                chosenCards[1] = num;
                cardChek();
            }
        }
    }
    function turnCard(num){
        var el = document.getElementsByClassName("card");
        while (obj.item(num).childNodes.item(0)){
            obj.item(num).childNodes.item(0).remove();
        }
        obj.item(num).style.backgroundColor="rgb(27,173,172)";
    }
    function cardChek(){
         if(placeShapes[chosenCards[0]] === placeShapes[chosenCards[1]]){
             console.log("yesssss");
             point++;
             choice = 0;
             chosenCards[0] = null;
             chosenCards[1] = null;
             if(chooseNum === 6){
                 let cards = document.getElementsByClassName("card");
                 for(let i = 0 ; i<6;i++) {
                     while (cards.item(i).childNodes.item(0)) {
                         cards.item(i).childNodes.item(0).remove();
                     }
                 }
                newPlaceShapes();
                 $("confirm").style.visibility = "visible";
                chooseNum = 0;
             }
         }
         // else{
         //     console.log("nooooo");
         //     turnCard(chosenCards[0]);
         //     turnCard(chosenCards[1]);
         //     chooseNum -= 2;
         //     choice = 0;
         // }


    }


</script>
</html>